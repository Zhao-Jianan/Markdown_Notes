虚幻中的UI系统有两个，SlateUI和UMG，SlateUI没有图形界面，只能用C++，UMG依赖于SlateUI，有图形界面，但是底层代码是SlateUI
Widget--Control--控件
# UMG系统(Unreal Motion Graphics)
用来制作游戏UI
## User Interface/UI(用户界面)资产
### Font/字体
虚幻引擎中的字体被分类为字体资源

导入字体方法：
直接将字体文件拖入资产管理器中，会自动生成FontFace文件和Font文件，Font文件实际上是字体文件拖入虚幻引擎后，自动将字体转为

### Widget Blueprint/用户控件蓝图
虚幻制作UI视觉效果和UI交互的蓝图工具，非常重要，是UMG的核心，提供了构建控件、显示控件、移除控件等基础功能。也定义了不同的UI事件。它在蓝图类中属于Object-->Visual-->Widget-->UserWidget
我们可以自定义控件的子类对功能和属性进行扩展
所有的子类可以对父类函数进行重写 实现自身与其他控件不同的逻辑

使用UMG，需要在关卡蓝图中使用Create Widget节点调用UMG，并且使用Add to Viewport节点添加到视口上

### 标准控件蓝图
标准控件即UMG系统中默认提供的文本控件、按钮控件等。不能重写函数，没有事件


# UMG的生命周期
## 事件初始化时
只要没有销毁，就只运行一次
## 事件预构造
用的不多，在编辑器中触发，即点编译时触发
## 事件构造
最常用
## 事件Tick



# UI Manager
为了方便UI管理，一般在项目初始就要构建好UI框架，通常要创建一个UI Manager来管理UI，创建一个UI Panel作为UI父类，所有的UI都创建为UI Panel的子类，便于管理。需要复用的UI的缓存池也可以把功能移植到UI Manager中
## UITypeEnum
创建一个枚举UITypeEnum作为对应关系，方便UI Manager调用，有多少个UI就创建多少个枚举成员，相当于人事把所有员工录入系统，和工号一一对应
## UI Manager
存储UI界面，提供增删改查功能
### 变量
#### UIModuleDatas
创建一个映射变量UIModuleDatas，由枚举UITypeEnum映射到BaseUI类引用，用来存储所有的UI界面信息，初始就把所有UI都添加到默认值，在游戏运行开始时把所有可能会在游戏中显示的界面信息都读取，属于存储功能
#### ShownUI
创建一个映射变量ShownUI，由枚举UITypeEnum映射到BaseUI对象引用，用来缓存所有已显示过的UI界面，初始化时为空，当打开一个界面后，界面需要添加到已经打开的界面集合。可以通过ShownUI获取某一个界面是否显示过，可以在任何地方和时机获取某一个界面
### 供外部调用的函数
#### Open UI
显示某一界面，属于新增和修改功能
输入接口为UI Type枚举值和传参用的Object类型
输出接口为UI Panel类型，方便显示后调用UI界面
函数内容通过判断Shown UI中是否存在输入的UI Type，不存在的话从UIModuleDatas中获取并创建UI控件，添加到Shown UI映射后，再通过创建的UIManager内部使用的函数Add UI To View显示；存在的话直接通过创建的UIManager内部使用的函数Add UI To View显示
#### Hide UI
隐藏某一界面，属于修改功能
输入接口为UI Type枚举值
无输出接口
函数内容通过判断Shown UI中是否存在输入的UI Type，存在的话通过创建的UIManager内部使用的函数Hide Panel隐藏；不存在的话不输出
#### DisposeAllUI
释放所有已经加载的界面，属于删除功能
无输入接口
无输出接口
函数内容通过遍历ShownUI的Key值，再通过Key值查找ShownUI的Value，获取到每一个已显示过的UI，通过UI的Cant Dispose的布尔值判断，Cant Dispose为Fasle时，执行UI的回调函数On Dispose，并从ShownUI中移除
#### GetUIPanel
查找某一界面，属于查询功能
输入接口为UI Type枚举值，通过UI Type查询
输出接口为UI Panel类型，输出查询到的UI界面
函数内容通过判断Shown UI中是否存在输入的UI Type对应的UI界面，存在的话，输出查询到的UI界面
### 内部函数
UI Manager内部使用的函数，权限设为Private，避免被外部错误调用
#### Add UI To View
供Show UI调用的内部函数，功能是将UI界面添加到视口显示
输入接口为UI Panel类型和传参用的Object类型
无输出接口
函数内容通过对输入的UI Panel的Hide Other布尔值进行判断，为True时执行创建的内部函数Hide Other Panel来隐藏其他UI界面，之后True和False均执行设置输入的UI Panel的IS Showing布尔值为True。之后执行回调函数On Show，将Object参数传递到On Show。之后再执行Add to Viewport，将输入的UI Panel添加到视口，实现显示功能
#### Hide Other Panel
供Add UI To View调用的内部函数，功能是隐藏其他界面
无输入接口
无输出接口
函数内容通过遍历ShownUI的Values值获取到每一个已经显示过的UI，通过UI的IS Persistent来判断，True执行为空，False执行创建的内部函数Hide Panel隐藏界面
#### Hide Panel
供Hide UI和Hide Other Panel调用的内部函数，功能是实现界面隐藏
输入接口为UI Panel类型
无输出接口
函数内容通过判断输入的UI Panel的IS Showing值，如果为True，就把IS Showing值设为False，执行回调函数On Hide,再执行Remove from Parent，实现界面隐藏

## UI Panel
空的UI，作为所有UI的父类，具有所有UI都具备的基础属性和功能
### 把所有的UI分为4类：
#### 持久化界面
一般主界面 任何其他界面显示 都不会隐藏的界面
#### 普通界面
分为互斥界面和不互斥界面
##### 互斥界面
当一个界面显示，其他普通界面都需要关闭
##### 不互斥界面
界面显示时，其他界面不受影响
#### 特殊界面/静态界面
提示框、对话框等（随时随地出现，永远显示在别的界面之上，不需要和其他界面互斥） 一个界面显示，其他界面显示结果不变
#### 跨关卡界面
关卡切换时不销毁 一直处于显示状态
### 变量
#### Hide Other
布尔类型，True为互斥界面，打开一个界面后会关闭其他界面；False为普通界面，打开一个界面后不影响其他界面
#### Dont Dispose
布尔类型，True为静态界面，即对话框、Loading等随时随地出现，永远显示在别的界面之上，不需要和其他界面互斥的界面
#### IS Persistent
布尔类型，True为持久化界面，即主界面等不会被互斥界面影响的界面
#### IS Showing
布尔类型，初始为False，正在显示赋值True，隐藏后再赋值False，方便确定UI当前显示状态
### 函数
创建3个回调函数，方便函数在界面显示、隐藏、释放时执行的特殊行为。传入的参数为了便于通用，可以设定为Object类型
#### On Show
界面显示时的回调函数，主要用来Tip、对话框等在显示时的文字赋值、Loading进行关卡流送的关卡名赋值等
#### On Hide
界面隐藏时的回调函数
#### On Dispose
界面释放时的回调函数



## UI适配的几种方案：
1. 调整DPI缩放，确定默认设计分辨率，基于宽或高进行等比缩放设置，确定界面在不同分辨率下的显示效果，所有子控件的锚点设置为4个角
2. 调整DPI缩放，确定默认设计分辨率，在DPI曲线中分别设置不同机型的分辨率显示效果
3. 调整DPI缩放，维持界面的整体缩放比例不变，留出的黑边通过设置刘海（挡板）进行限制，所有子控件的锚点设置基于中心点偏移


## 显示/关闭UI的几种方式：
1. 所有界面都是通过Create Widget后 再调用Add To View和Remove Form Parent来控制显示和隐藏（独立界面）
2. 如果界面默认存在屏幕中，通过Set Visibility（Visible/Collapsed）控制UI界面的显示状态（默认主界面，界面依附紧密）
3. 如果屏幕中会出现一个以上相同的界面对象时利用缓存池的原理(预加载、加载和回收)对界面进行管理


## 界面上控件数据赋值的几种办法：
1. 通过绑定变量或者函数的形式赋值（数据需要实时变化）
2. 在界面打开的回调事件中给控件赋值Event Construct或On Show函数赋值（打开界面赋值一次，数据不需要实时变化）
3. 通过事件分发器实现数据的通知（数据需要实时变化）
4. 通过管理类获取UMG界面对象，通过界面对象查找控件进行赋值（只在特定情况下才需要修改UI界面）



## 更新UI的三种方式
1. 函数绑定，把数值和函数的返回值绑定，每帧检查函数返回值
2. 属性绑定，把数值和属性绑定，每帧检查属性值
3. 事件驱动，当触发事件时，主动通知和更新UI，触发次数比前两种少很多，在正式的产品开发中，应该尽量使用事件驱动UI（如事件分发器等方式主动通知UI更新）
函数/属性绑定和事件驱动对比
函数/属性绑定--开发简单--依赖最少--性能差
事件驱动-------开发稍繁--稍有依赖--性能好 

## 复杂度对比
函数/属性绑定----多处更新无影响
事件驱动---------每处更新都要触发事件
依赖
1. A引用了B，则A依赖B
2. 依赖无法去除，因为事物之间的联系是普遍存在的，软件必须正确反映事实
3. 应该保留必要的依赖，减少不必要的依赖
性能对比
函数/属性绑定----每秒60次更新
事件驱动---------有变化时更新

业务逻辑不依赖UI，UI依赖业务逻辑

UI和UI之间最方便的方式是互相引用


# 定制化UI
定制化UI的两种方式：组合和继承
## 组合
组合是UMG默认的使用方式，组合对继承不友好
## 继承
对标准控件继承
### 方法1-蓝图继承：
新建蓝图，类型为要继承的标准控件，如：button
或在Engine C++ Classes中找到相应的标准控件，右键Create Blueprint class based on
### 方法2-C++继承：
在Engine C++ Classes中找到相应的标准控件，右键Create C++ class derived from


# UMG编辑器
## Designer/设计器
用来设计UI界面
### Palette/控制板
提供了很多UI控件，空间的所有参数几乎都可以在图表中调用
#### Common/通用
##### Border/边界
能包含一个子控件的容器控件，以便使用背景图像或填充将子控件包围，还可以设置子控件填充颜色，可以和子控件原本颜色叠加
###### Content/内容
在这里设置子控件的共同属性
- Content Color and Opacity----设置内容颜色和透明度，这里的颜色会和子控件原本的颜色叠加
###### Appearance/外观
- Brush------------------------设置边界框背景
- Brush Color------------------设置边界框颜色

##### Button/按钮
可点击的基元控件，以启用基础交互，包含一个子项，可以在按钮中放置任意其他控件
###### 基础参数
- Is Variable------------------是否为变量，勾选后，将当前控件提升为变量
###### Slot/插槽
所有的控件都是作为它的父级控件的插槽存在，位置和缩放等基础变换都由插槽决定

Slot在UMG中是一个单独的对象，与子控件是分开的，在蓝图中可以单独调用Slot Object，需要深入理解这一点
- Anchors----------------------锚点，设置插槽锚点，也可以手动拖动菊花标记
**菊花标记可以拆散，拆散后花瓣贴在左右两侧边缘即无论玩家设备屏幕大小，水平方向始终铺满整个屏幕；花瓣贴在上下两侧边缘即无论玩家设备屏幕大小，垂直方向始终铺满整个屏幕；如果花瓣贴在四个角，即无论玩家设备屏幕大小，游戏界面始终铺满整个屏幕，需要配合DPI设置使用，否则会出现画面比例不正确等情况出现**
- Position X-------------------水平位置，0点由锚点决定
- Position Y-------------------垂直位置，0点由锚点决定
- Size X-----------------------水平尺寸
- Size Y-----------------------垂直尺寸
- Alignment--------------------对齐，(0,0)为左上角，(1,1)为右下角，想让锚点在控件中心，调成(0.5,0.5)
- Size To Content--------------大小到内容，勾选后由源素材尺寸控制
- ZOrder-----------------------设置覆盖关系，数字越大，越靠前
###### Appearance/外观
- Style------------------------样式
  - Normal-----------------------普通，正常情况下显示风格
    - Image------------------------图像，显示图片，一般将图片转为精灵使用
    - Image Size-------------------图像大小，初始图片尺寸，一般不调这里的尺寸
    - Tint-------------------------着色，调整图片颜色
    - Draw As----------------------绘制为，按钮显示风格
      - None-------------------------不显示按钮
      - Box--------------------------盒体
      - Border-----------------------边界
      - Image------------------------图像
    - Margin-----------------------边缘
  - Hovered----------------------已悬停，鼠标悬停时显示风格
  - Pressed----------------------已按压，点击按钮时显示风格
  - Disabled---------------------已禁用，禁用时显示风格，默认为灰色
- Color and Opacity------------颜色和透明度，修改的是按钮的子控件的颜色，如按钮上的文字
- Background Color-------------背景颜色，修改的是按钮本身的颜色
###### Interaction/交互
- Is Focusable-----------------为可聚焦
- \>
- Click Method-----------------点击模式，定义Click的模式，触发Click的交互
###### Accessibility/可访问性
这里的参数默认即可
###### Behavior/行为
- Tool Tip Text----------------工具提示文本，输入后，鼠标悬停可以显示提示
- Is Enable--------------------已启用，勾选后组件启用
- Visibility-------------------可视性，设置组件是否可见
  - Visible----------------------可见，且会响应鼠标事件
  - Collapsed--------------------折叠，会隐藏，且不占用布局空间，比如水平框里的一个子控件设为折叠，后面的子控件会前移占据它的位置
  - Hidden-----------------------隐藏，但是占用布局空间
  - Not Hit-Testable(Self&All Children)--不响应鼠标事件（自己和所有子控件）
  - Not Hit-Testable(Self Only)--不响应鼠标事件（自己）
- Render Opacity---------------渲染不透明度，1为完全不透明，0为完全透明，与可视性不相关，如果可视性设为Visible，透明度设为0，虽然完全透明，但是可以响应鼠标事件
- \>
- Tool Tip Widget--------------工具提示控件，功能很强大，可以绑定一个UMG控件或一个标准控件，来控制提示文本，例如显示为图片、或者调节字体大小颜色等
###### Render Transform/渲染变换
在这里设置渲染效果的变换，没有特殊需要，一般保持默认即可

通常修改变换是在Slot中修改，在水平框垂直框控件中的子控件在Slot中修改会影响其他子控件，而在这里修改，不会影响其他子控件
###### Performance/性能
- Is Volatile------------------易变的。如果该UI控件每一帧都在动，布局信息都在变化，那么勾选上此选项，引擎就不会对该UI进行缓存，从而提升性能
###### Clipping/裁剪
在子控件超出父控件的范围时是否裁剪，在父控件里调这里的参数来影响子控件
- Clipping---------------------裁剪
  - Inherit----------------------继承，即不裁剪
  - Clip To Bounds---------------裁剪到边界
  - Clip To Bounds-Without Intersecting(Advanced)--裁剪到边界（不相交），如果父控件的父控件设置的裁剪到边界，那么父控件设为此选项，子控件就不会再受父控件的父控件裁剪影响
  - Clip To Bounds-Always(Advanced)--裁剪到边界（始终），如果父控件的父控件设为此选项，不管父控件裁剪选项设置的哪个，子控件都会受到父控件的父控件影响
  - On Demand(Advanced)----------按需要，和Clip To Bounds功能完全相同，但是对文字控件做了一些优化

###### Navigation/导航
控制手柄导航，即设置游戏手柄输入如何在UI中切换
- Left-------------------------左键
  - Escape-----------------------退出，即自动聚焦到左侧的UI控件，如果已经是最左侧的控件，则保持不动
  - Stop-------------------------停止，始终保持不动
  - Wrap-------------------------包裹，自动聚焦到左侧的UI控件，如果已经是最左侧的控件，则聚焦到最右侧UI
  - Custom-----------------------自定义，可以绑定一个函数来控制
  - Custom Boundary--------------自定义边界，可以绑定一个函数来控制
###### Localization/本地化
###### Events/事件
添加按钮能够触发的事件

##### Check Box/复选框
复选框控件，可显示“未勾选”“已勾选”和“未确定”三种切换状态，勾选和未勾选可以使用图片，可以作为传统复选框，也可以用作切换按钮或单选按钮，用作单选按钮用节点需要绑定两个勾选框
###### Appearance/外观
- Checked State----------------勾选状态

##### Image/图像
###### Appearance/外观
- Brush------------------------笔刷，注意如果在图表中调用图片，要找的节点是笔刷相关的
  - Image------------------------显示图片，一般将图片转为精灵使用
  - Image Size-------------------初始图片尺寸，一般不调这里的尺寸
  - Tint-------------------------着色，调整图片颜色
  - Draw As----------------------绘制方式
    - Image------------------------图片，比较常用，一般都使用Image方式
      - Tilling----------------------平铺，设置图片的平铺样式
    - Box--------------------------盒子，会使图片使用九宫格拉伸，即拉伸缩放时，四个角和边缘不会发生形变，从而使边缘的比例显示正确
      - Margin-----------------------设置布局，即每个边缘百分之多少的部分不拉伸
- Color and Opacity------------颜色和透明度，Tint和Color And Opacity都是调颜色，Tint调的是控件下面的图片，Color And Opacity调的是控件本身，但总要把图片放到控件里，所以调哪个本质没区别

##### Named Slot/命名的插槽
为UMG公开一个外部插槽，其他UMG控件可以在此命名插槽中随意放入任何内容
UserWidget在另一个UserWidget中使用的时候无法添加子控件，此时可以在第一个UserWidget中放入Named Slot，在另一个UserWidget中使用的时候就可以添加子控件了

##### Progress Bar/进度条
一般用来制作血条
###### Style/样式
- Style
  - Background Image-------------背景图片
  - Fill Image-------------------填充图片
  - Marquee Image----------------边框图片
###### Progress/进度
- Percent----------------------百分比，设置进度条百分比，一般使用绑定
- Bar Fill Type----------------条填充类型，设置从左到右或从右到左等类型

##### Rich Text Block/多格式文本块
很重要的一个组件，可以用来显示多种不同样式的文字或图片艺术字，需要与Data Table/数据表格资产配合使用

用法1-----显示不同样式的文字
- 第1步：在资产管理器中新建Miscellaneous(杂项)-->Data Table(数据图表)，选择RichTextStyleRow
- 第2步：在数据图表中创建多个文本风格，注意行命名（调用时需要使用的），设置字体和颜色
- 第3步：打开UMG编辑器，创建Rich Text Block，在Appearance-->Text Style Set中选择创建的数据图表
- 第4步：在文本块中输入文字，或在事件图表中添加文字格式为```<数据表格中的行命名>文本内容</><数据表格中的行命名>文本内容</>```


用法2-----调用美术制作好的艺术字图片，如0-9的数字图片
- 第1步：在资产管理器中新建Miscellaneous(杂项)-->Data Table(数据图表)，选择RichImageRow
- 第2步：在数据图表中创建多个行，注意行命名（0-9可以把数字作为行命名），设置数字对应的图片和图片尺寸
- 第3步：创建蓝图，选择RichTextBlockImageDecorator蓝图类，打开蓝图，在Image Set中选择创建的数据图表(注意这一步非常重要，不是蓝图无法被UMG调用)
- 第4步：打开UMG编辑器，创建Rich Text Block，在Appearance-->Secorator Classes中添加项，并选择创建的蓝图
- 第5步：在文本块中输入文字，或在事件图表中添加文字格式为 ```<Img id="数据表格中的行命名"/>```

###### Appearance/外观
- Text Style Set---------------文本样式集，用来添加字体类数据图表
- Decorator Classes------------装饰器类，用来添加图片类数据图表蓝图

##### Slider/滑动条
一个带手柄的滑条，是可交互的控件，玩家可以在游戏中拖动手柄，可以用不同的图片填充滑条和手柄
###### Appearance/外观
- Value------------------------滑动条的当前值
- Min Value--------------------滑动条最小值
- Max Value--------------------滑动条最大值

##### Text/文本
###### Content/内容
- Text-------------------------文本，输入文字，也可以绑定
###### Appearance/外观
- Color and Opacity------------调整文字颜色和透明度
- Font-------------------------设置字体
  - Font Family------------------选择字体
  - Typeface---------------------设置粗体斜体
  - Size-------------------------尺寸
  - Letter Spacing---------------字间距
  - Font Material----------------字体材质，可以使用字体材质制作艺术字效果
  - Outline Settings-------------描边设置，可以给字体添加描边效果
    - Outline Size-----------------描边尺寸
    - Outline Material-------------描边材质
    - Outline Color----------------描边颜色，描边颜色会和描边材质进行混合叠加
- Strike Brush-----------------删除线
- Shadow Offset----------------阴影偏移，注意阴影会增加系统消耗，一般不使用阴影
- Shadow Color-----------------阴影颜色
- Transform Policy-------------切换字母大小写
- Justification----------------对齐
###### Wrapping/包裹
- Auto Wrap Text---------------自动包裹文字，勾选后文字会自动换行

#### Editor/编辑器
##### Details View/细节视图

##### Single Property View/单属性视图

#### Input/输入
##### ComboBox(string)/组合框（字符串）
带有向下箭头的选择框，点击箭头可以选择

##### Editable Text/可编辑文本
可以提前输入好文字在游戏中显示，同时在游戏中也可以修改和输入文字的文本框

##### Editable Text(Multi-Line)/可编辑文本（多行）
可以提前输入好文字在游戏中显示，同时在游戏中也可以修改和输入多行文字的文本框

##### Spin Box/旋转框
数字输入框，翻译有误，玩家可以直接输入数字或单击并滚动数字

##### Text Box/文本框
可以在游戏运行中让玩家输入文字，它只能输入一行字符
###### Events/事件
- On Text Changed/当文本变化时
文本发生变化时就触发，正在输入时输入一个字符触发一次
*注意输入中文，输入一个字此事件会触发两次*
- On Text Committed/当文本提交时
当按下回车键或文本框失去焦点时都会触发

##### Text Box(Multi-Line)/文本框（多行）
###### Events/事件
- On Text Changed/当文本变化时
文本发生变化时就触发，正在输入时输入一个字符触发一次
*注意输入中文，输入一个字此事件会触发两次*
- On Text Committed/当文本提交时
当按下回车键或文本框失去焦点时都会触发，但是多行文本框按下回车会换行，与文本提交有冲突，一般可以做一个按钮来提交

#### Lists/列表
##### List View/列表视图
即超长列表，当列表条目有上千个时，使用水平框、垂直框网格面板都不适合，会非常卡甚至直接崩溃，此时使用List View，List View对条目数做了优化，理论上可以显示无限个条目
列表视图允许显示多达数千个元素的虚拟化列表

一个重要区别是Item和Entry
Item可以理解为数据，Entry可以理解为一个UI实体

要使子控件可用作List View中的条目，它必须从lUserObjectListEntry接口继承

List View不能添加子控件，它所有的数据都需要动态创建

List View的使用方法
- 第1步：创建Entry类，实现IUserObjectListEntry
  - 具体做法：新建一个用户控件，命名为Entry，作为列表条目，在里面编辑列表单项的内容。在类设置中添加接口，接口名为User Object List Entry
- 第2步：创建Item类
  - 具体做法：新建一个蓝图，父类选择Object，命名为ItemData，作为列表条目数据，在里面创建变量，并设为生成时赋值，用来存储Entry的数据
- 第3步：初始化Item实例，填充ListView
  - 具体做法：在主UI中增加一个ListView标准控件，在List Entries-->Entry Widget Class中选择Entry类。创建一个函数Ini List View,并调用，函数中使用For Loop循环设置生成多少个Entry。后面连接Construct Object from Class节点，选择ItemData类，并设置好相关变量赋值，再连接ListView的Add Item节点，来动态添加到列表
- 第4步：关联Item和Entry
  - 具体做法：在Entry中调用Event On List Item Object Set事件，输出引脚List Item Object类型转换到ItemData,并将ItemData中的数据赋值到Entry中相应的控件上
###### List Entries/列表条目
- Entry Widget Class-----------选择条目控件类，注意条目控件类必须添加了User Object List Entry接口，才能在这里选择

##### Tile View/瓦片视图
与List View使用方法相同，显示的是网格形式，多行多列排列

使用瓦片视图后，如果缩放时子控件中图片比例不正确，可以在子控件中的图片控件设为居中，然后加一个Scale Box来控制

##### Tree View/树视图
与List View使用方法相同，将树型数据展示为树状图，游戏中并不常用

#### Misc/杂项
##### Expandable Area/可扩展区域
可以折叠或展开容器中的子控件，带有Header和Body两个子项，Header默认显示，Body默认折叠，点击展开的三角符号，可以展开Body显示

#### Optimization/优化
##### Invalidation Box/无效框
它会对运行时不更新的控件进行优化，节省系统资源，如果确定一个控件在游戏运行时不会更新，可以把它放到无效框中。在游戏运行时会更新的控件放入无效框后，它会保持初始值不再更新
###### Caching/缓存
- Can Cache--------------------可以缓存，勾选后子控件不再更新

##### Retainer Box/Retainer盒体
非常重要的一个控件，它有两个功能：一个是控制UI更新频率，一个是把渲染后的UI当成Texture，放入材质里加工后再显示到UI。它可以让UI放飞自我，拓展性非常高

它首先会把子控件渲染到一个Render Target上，再将渲染目标渲染到屏幕。还可以控制频率和相位，以便使UI可以比主游戏更低的频率渲染，还可以加入材质做简单的后期处理
###### Render Rules/渲染规则
- Phase------------------------相位，从第几帧开始刷新，数值不能超过Phase Count
- Phase Count------------------相位数，即隔多少帧刷新一次，单位是帧
###### Effect/效果
- Effect Material--------------效果材质，给Render Target赋予材质效果

利用Retainer Box制作圆形小地图，可以做一个UI材质，用一个圆形给到Mask通道，再把材质给到Effect Material上

#### Panel/面板
##### Canvas Panel/画布面板
默认会添加的一个基础组件，限定UI的范围框，使用很频繁，制作UI时一般把UI分成多个区域，每个区域使用一个Canvas Panel作为根组件，方便管理和操作，手动布局时非常实用，过程化生成控件进行布局时不实用

##### Grid Panel/网格面板
在所有子控件之间平均分割可用空间的面板，与Uniform Grid Panel类似，但是它的网格可以不是统一大小，可以实现例如暗黑破坏神中的不同装备占用格子数不同的效果
###### Slot/插槽（注意要在子项中调整）
- Row--------------------------行，子控件占用格子的行ID
- Row Span---------------------行跨度，子控件的格子占用多少行
- Column-----------------------列，子控件占用格子的列ID
- Column Span------------------列跨度，子控件的格子占用多少列
- Layer------------------------层，与其他控件插槽的ZOrder功能相同
- Nudge------------------------偏移，和Render Transform中的Translation功能相同
###### Fill Rules/填充规则
和其他控件插槽的填充设置相同，这里是给放到网格面板自身属性中了，以数组的方式来分别控制各行各列，如果不设置就默认是Auto

默认情况下，如果第1行没有元素，把一个子控件的Row设为2，它不会移动位置，因为默认填充规则是Auto，中间填充的第1行因为没有元素，所以不占用位置空间

- Column Fill------------------列填充
- Row Fill---------------------行填充

##### Horizontal Box/水平框
非常常用的布局控件，子项自动水平布局
###### Slot/插槽（注意要在子项中调整）
- Padding----------------------布局，距离上下左右边缘距离
- Size-------------------------尺寸，控制的是子控件元素所占格子的尺寸
  - Auto-------------------------自动，子项会自动平均分布
  - Fill-------------------------填充，按照多少比例填充，所有子项都是1就平均分布，如果有三个子项，第一个是2，后两个是1，那就是2:1:1分布
**注意：不能在运行时修改子项排列顺序**
- Horizontal Alignment---------水平对齐，控制子控件的对齐，子控件的尺寸会随之变化，但是子控件元素所占格子不会改变
- Vertical Alignment-----------垂直对齐，控制子控件的对齐，子控件的尺寸会随之变化，但是子控件元素所占格子不会改变

水平框默认是左对齐，子控件不多的时候，右边留空。让水平框右对齐的方法：
- 方法1：把最左侧的元素的Size改为Fill，Horizontal Alignment改为右对齐
- 方法2：在最左侧加一个空白的子控件，如Size Box或Canvas Panel，把它的Size改为Fill

##### Overlay/覆盖层
层级控制，允许控件上下堆叠并对每层内容采用简易流动布局的面板，可以在它下面放多个元素，并随便叠加
专门用来制作有重叠区域的多个元素的面板
Overlay的Slot没有ZOrder属性，子控件都在同一层上，后面的子控件在前面的子控件之上

##### Safe Zone/安全区
类似于视频软件的安全框，主机、投影仪等设备可能会出现过扫描文件，在屏幕边框外通常有额外像素，安全区可以拉取平台安全区信息并添加填充。另外很多手机屏幕是刘海屏，有一部分屏幕被摄像头遮挡，用了安全区会自动避开这些地方

##### Scale Box/缩放框
子项会按缩放框的大小进行缩放
###### Stretching/拉伸
- Stretch----------------------拉伸方式
  - None-------------------------无，子控件会保持原始尺寸
  - Fill-------------------------填充，子控件会填充缩放框，跟随缩放框缩放，不会保持宽高比
  - Scale to Fit-----------------缩放到适合，跟随缩放框缩放，子控件会保持宽高比进行缩放
  - Scale to Fit X---------------缩放到适合X，跟随缩放框缩放，子控件X方向会填充缩放框，同时会保持宽高比，如果Y方向超出缩放框，会被裁剪
  - Scale to Fit Y---------------缩放到适合Y，跟随缩放框缩放，子控件Y方向会填充缩放框，同时会保持宽高比，如果X方向超出缩放框，会被裁剪
  - Scale to Fill----------------缩放到填充,跟随缩放框缩放，横向放大缩放框，子控件X方向会填充缩放框，同时会保持宽高比，如果Y方向超出缩放框，会被裁剪；纵向放大缩放框，子控件Y方向会填充缩放框，同时会保持宽高比，如果X方向超出缩放框，会被裁剪
  - Scale by Safe Zone-----------按安全区域缩放，子控件会保持原始尺寸，如果缩放框小于原始尺寸，子控件不会跟随缩放，依然保持原始尺寸
  - User Specified---------------用户指定，用户自行指定缩放大小
- Stretch Direction------------拉伸方向
- User Specified Scale---------用户指定缩放值

##### Scroll Box/滚动框
会有一个滚动条，可以滚动页面显示子项，当需要在一个列表中显示10-100个控件时非常有用。该控件不支持虚拟化

##### Size Box/尺寸框
用于指定所需尺寸。尺寸框会将子控件强制限制为特定尺寸，下面只能放一个元素

注意勾选了Size To Content才会生效

尺寸框默认没有效果，要在子项布局中勾选选项才会有效果
###### Child Layout/子项布局
- Width Override---------------覆写宽度，勾选后，重新指定子控件的宽度
- Height Override--------------覆写高度，勾选后，重新指定子控件的高度
- Min Desired Width------------最小所需宽度，勾选后，如果子控件宽度小于此项值，会使用此项值所谓子控件宽度，如果子控件宽度大于此项值，则还使用子控件原宽度
- Min Desired Height-----------最小所需高度，勾选后，如果子控件高度小于此项值，会使用此项值所谓子控件高度，如果子控件高度大于此项值，则还使用子控件原高度
- Max Desired Width------------最大所需宽度，勾选后，如果子控件宽度大于此项值，会使用此项值所谓子控件宽度，如果子控件宽度小于此项值，则还使用子控件原宽度
- Max Desired Height-----------最大所需高度，勾选后，如果子控件高度大于此项值，会使用此项值所谓子控件高度，如果子控件高度小于此项值，则还使用子控件原高度
- Min Aspect Ratio-------------最小宽高比
- Max Aspect Ratio-------------最大宽高比

##### Uniform Grid Panel/统一网格面板
在所有子控件之间平均分割可用空间的面板
###### Slot/插槽（注意要在子项中调整）
- Row--------------------------行Index值
- Column-----------------------列Index值
###### Child Layout/子项布局
- Slot Padding-----------------插槽布局，Uniform Grid Panel插槽没有插槽布局选项，而是在这里统一设置
- Min Desired Slot Width-------最小所需插槽宽度
- Min Desired Slot Height------最小所需插高度

##### Vertical Box/垂直框
非常常用的布局控件，子项自动垂直布局

注意：不能在运行时修改子项排列顺序

##### Widget Switcher/控件切换器
可以切换显示的子控件。类似于选项卡控件，但没有选项卡，可以自行创建并与此控件组合以获得类似于选项卡的效果。一次最多只显示一个控件

##### Wrap Box/包裹框
该控件会将子控件从左到右排列，超出其宽度时会将其余子控件放到下一行，适合做商店面板等
###### Slot/插槽（注意要在子项中调整）
- Fill Empty Space-------------填充空白空间，勾选后，如果此子控件是包裹框中一行的最后一个，那么他会填充包裹框右侧的空白区域
- Fill Span When Less Than-----小于多少是填充跨度，当包裹框宽度小于此选项设定值时，此子控件会填充一整行
###### Content Layout/内容布局
- Inner Slot Padding-----------内部插槽布局，即每一个插槽的内部留白
- Wrap Size--------------------包裹尺寸
- Explicit Warp Size-----------明确包裹尺寸，勾选后设定包裹尺寸，只要右侧距离超出包裹尺寸就换行
- Orientation------------------方位

#### Primitive/图元
##### Circular Throbber/循环动态浏览图示
循环播放图像旋转的动画

##### Menu Anchor/菜单锚
可以指定组件作为弹出式菜单，固定到锚点位置，并从该位置调用，一般把一个按钮控件作为子控件，点击按钮弹出菜单
###### Menu Anchor/菜单锚
- Menu Class-------------------选择要弹出的菜单类
- Placement--------------------设置调用的菜单位置
  - Below------------------------下
  - Centered Below---------------下居中
  - Below Right------------------下右
  - Combo Box--------------------组合框，将菜单放在锚点下面，宽度匹配锚的宽度
  - Combo Box Right--------------组合框右
  - Right------------------------右
  - Above------------------------上
  - Centered Above---------------上居中
  - Above Right------------------上右
  - Left-------------------------左
  - Center-----------------------中
  - Right Center,Left Center-----右中，左中
  - Match Bottom Left Corner-----匹配左下角

##### Native Widget Host/原生控件主机
把一个SlateUI控件放到UMG中，如果项目混用了Slate和UMG，则可以使用这个控件，一般是在维护老项目时会用到
虚幻引擎的原生UI就是SlateUI，UMG是基于SlateUI的

##### Spacer/间隔区
提供与其他控件之间的自定义填充。隔离控件并不进行视觉呈现，在游戏中不可见

##### Throbber/动态浏览图示
在一行中显示数个缩放圆圈，例如，可以用来表示正在进行加载

#### Special Effects/特殊效果
##### Background Blur/背景模糊

#### Synth/合成
##### Synth 2DSlider/合成2D滑动条

##### Synth Knob/合成钮

#### User Created/用户创建
这里会出现用户已创建的UMG，在这里可以直接调用
##### Animation Sample UI/动画示例UI

#### Advanced/高级
##### Dynamic Entry Box/动态条目框
有可变条目数时使用。和List View功能类似，但是对条目数量并没有做优化，条目数量显示有限，它与水平框和垂直框的区别是它可以动态显示条目
###### Entry Layout/条目布局
- Entry Widget Class-----------选择条目控件类，注意这里与List View不同，条目控件类不用添加User Object List Entry接口，也可以使用

##### Input Key Selector/输入键选择器
用来在游戏中获取、识别和显示输入的按键，例如音乐类游戏的按键输入
###### Events/事件
- On Key Selected--------------当有按键被选择时，即获取到按键输入时触发此事件，可以获取到输入的按键信息
##### Window Title Bar Area/窗口标题栏区域
放置到视口中后，在游戏运行中，玩家可以点击这个区域来移动窗口
###### Interaction/交互
- Window Buttons Enabled-------激活后，会在这个控件区域右上方显示最小化、最大化、关闭三个按钮
- Toggle Fullscreen------------双击控件区域会全屏，开发模式下不起作用

### Hierarchy/层级
在这里添加和管理UI控件
### Designer/设计器
编辑视口
#### Screen Size/屏幕尺寸
在这里设置最终的显示大小，调整之后，默认的Canvas Panel会调整为设置的大小
#### Fill Screen/填充屏幕
在这里设置填充模式
#### DPI Scale/DPI缩放
非常重要的设置，配置UI缩放曲线，控制如何基于不同分辨率进行UI缩放
- Application Scale------------应用程序缩放，调整缩放值
- DPI Scale Rule---------------DPI缩放规则
  - Shortest Side----------------最短边，用DPI曲线控制屏幕当前的最短边缩放
  - Longest Side-----------------最长边，用DPI曲线控制屏幕当前的最长边缩放
  - Horizontal-------------------水平，用DPI曲线控制屏幕的水平缩放
  - Vertical---------------------垂直，用DPI曲线控制屏幕的垂直缩放
  - Scale to Fit-----------------缩放以匹配，选择此规则，DPI曲线失效，屏幕会根据应用程序所放置自适应缩放匹配
  - Custom-----------------------自定义，使用自定义缩放规则
- Custom Scaling Rule Class----自定义缩放规则类
- DPI Curve--------------------DPI曲线，设置DPI曲线来控制缩放，可以在曲线上添加点，并设置当前屏幕大小和对应的缩放值
- Scale To Fit Rule------------缩放匹配规则
  - Design Screen Size-----------设计屏幕大小，当DPI缩放规则设置为缩放以匹配时，默认的屏幕大小，即缩放值为1时，屏幕大小
### Animations/动画
添加UI动画，添加后，可以在时间轴中编辑，这里添加的动画可以根据命名在图表中调用
### Timeline/时间轴
制作UI动画，与Squence动画操作基本相同
#### 操作方法
先选择动画面板中的动画名，在视口中选择要添加动画的组件，点击+Track,创建时间线，再点击+号添加要播放动画的属性，再添加关键帧

## Graph/图表
用来制作UI的交互逻辑
### 特有节点
- Add Event
  - User Interface
##### Event Construct/构造事件
构造UI时触发
##### Event On Initialized/初始化时事件
仅在非模板实例上的游戏时间处调用一次，如果需要一个真实的在游戏中创建后仅执行一次的事件，则使用此事件
##### Event Pre Construct/预构造事件
构造UI之前触发